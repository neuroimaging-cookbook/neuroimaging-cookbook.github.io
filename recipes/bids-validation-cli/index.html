<!doctype html><html lang=en class=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.79.0"><link rel=apple-touch-icon sizes=180x180 href=https://neuroimaging-cookbook.github.io/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://neuroimaging-cookbook.github.io/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://neuroimaging-cookbook.github.io/favicons/favicon-16x16.png><link rel=manifest href=https://neuroimaging-cookbook.github.io/favicons/site.webmanifest><link rel=mask-icon href=https://neuroimaging-cookbook.github.io/favicons/safari-pinned-tab.svg color=#004750><link rel="shortcut icon" href=https://neuroimaging-cookbook.github.io/favicons/favicon.ico><meta name=msapplication-config content="https://neuroimaging-cookbook.github.io/favicons/browserconfig.xml"><title>BIDS Validation Recipe | Neuroimaging Cookbook</title><meta property="og:title" content="BIDS Validation Recipe"><meta property="og:description" content="Validating BIDS formatted Datasets using bids-validator Command Line Tool This recipe uses the bids-validator v1.5.7 command line tool to verify if a specified dataset conforms to the BIDS specification [1]. There are other ways to use the bids-validator, this is just one of the methods.
This is an especially important step if you intend to uses any of the BIDS Apps [2]like fMRIPrep, MRIQC, etc [3]
Ingredients  Node.js (at least version 10."><meta property="og:type" content="article"><meta property="og:url" content="https://neuroimaging-cookbook.github.io/recipes/bids-validation-cli/"><meta property="article:published_time" content="2020-12-13T00:00:00+00:00"><meta property="article:modified_time" content="2020-12-13T17:20:43-05:00"><meta itemprop=name content="BIDS Validation Recipe"><meta itemprop=description content="Validating BIDS formatted Datasets using bids-validator Command Line Tool This recipe uses the bids-validator v1.5.7 command line tool to verify if a specified dataset conforms to the BIDS specification [1]. There are other ways to use the bids-validator, this is just one of the methods.
This is an especially important step if you intend to uses any of the BIDS Apps [2]like fMRIPrep, MRIQC, etc [3]
Ingredients  Node.js (at least version 10."><meta itemprop=datePublished content="2020-12-13T00:00:00+00:00"><meta itemprop=dateModified content="2020-12-13T17:20:43-05:00"><meta itemprop=wordCount content="734"><meta itemprop=keywords content="bids,bids-validator,command line,bids apps,"><meta name=twitter:card content="summary"><meta name=twitter:title content="BIDS Validation Recipe"><meta name=twitter:description content="Validating BIDS formatted Datasets using bids-validator Command Line Tool This recipe uses the bids-validator v1.5.7 command line tool to verify if a specified dataset conforms to the BIDS specification [1]. There are other ways to use the bids-validator, this is just one of the methods.
This is an especially important step if you intend to uses any of the BIDS Apps [2]like fMRIPrep, MRIQC, etc [3]
Ingredients  Node.js (at least version 10."><link rel=stylesheet href=https://neuroimaging-cookbook.github.io/css/styles.6f49cd9669403b3d4f05f36b2a3ef2e1fdbd5edd557a4a5af41da43304200e585ad062a9cc82dab87ad9818e101d65fbacd2f310cc9830e09bad36de3f65e557.css integrity="sha512-b0nNlmlAOz1PBfNrKj7y4f29Xt1Vekpa9B2kMwQgDlha0GKpzILauHrZgY4QHWX7rNLzEMyYMOCbrTbeP2XlVw=="></head><body class=page-page><header class=nav_header><nav class="wrap nav menu"><a href=https://neuroimaging-cookbook.github.io/ class=nav_brand><picture data-lit=https://neuroimaging-cookbook.github.io/images/logo_lightmode.png data-dark=https://neuroimaging-cookbook.github.io/images/logo_darkmode.png>
<source srcset=https://neuroimaging-cookbook.github.io/images/logo_darkmode.png media="(prefers-color-scheme: dark)"><img srcset=https://neuroimaging-cookbook.github.io/images/logo_lightmode.png alt="Neuroimaging Cookbook Logo"></picture>
<label class="nav_toggle toggle" title="Site Menu" role=button><svg class="icon"><use xlink:href="#harmburger"/></svg></label></a><ul class=nav_body><li class=nav-item><div class=search><label for=find class=search_label><svg class="icon"><use xlink:href="#search"/></svg></label><input type=search class=search_field placeholder="Search the docs ..." id=find autocomplete=off><div class="search_results results"></div></div></li><li class=nav-item><a class=nav-link href=https://neuroimaging-cookbook.github.io/><span>Recipes</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/neuroimaging-cookbook/neuroimaging-cookbook.github.io/new/main/content/recipes><span>Submit a Recipe</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/neuroimaging-cookbook/neuroimaging-cookbook.github.io target=_blank>GitHub</a></li><li class=nav-item><div class=color_mode><label for=mode></label><input type=checkbox class=color_choice id=mode title="Toggle Dark Mode"></div></li></ul></nav></header><div class="main pt-2"><div class="wrap grid-middle"><div class="content content-accent"><h1>BIDS Validation Recipe</h1><h2 id=validating-bids-formatted-datasets-using-bids-validator-command-line-tool>Validating BIDS formatted Datasets using <code>bids-validator</code> Command Line Tool</h2><p>This recipe uses the <code>bids-validator</code> v1.5.7 command line tool to verify if a specified dataset conforms to the
BIDS specification <a href=#ref1>[1]</a>. There are other ways to use the bids-validator, this is just one of the methods.</p><p>This is an especially important step if you intend to uses any of the BIDS Apps <a href=#ref2>[2]</a>like fMRIPrep, MRIQC, etc <a href=#ref3>[3]</a></p><h2 id=ingredients>Ingredients</h2><ul><li>Node.js (at least version 10.11.0) <a href=https://nodejs.org/en/>Installation</a></li></ul><h2 id=prep>Prep</h2><ul><li>Install bids-validator <a href=#ref4>[3]</a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ npm install -g bids-validator
</code></pre></td></tr></table></div></div><p>If you run into <code>Permission denied</code> related errors, try:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo npm install -g bids-validator
</code></pre></td></tr></table></div></div></li></ul><h2 id=usage>Usage</h2><p>If the installation was successful, running <code>bids-validator --help</code> on your terminal should give you the following output:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>Usage: bids-validator &lt;dataset_directory&gt; <span class=o>[</span>options<span class=o>]</span>
Options:
  --help, -h                  Show <span class=nb>help</span>                                <span class=o>[</span>boolean<span class=o>]</span>
  --version, -v               Show version number                      <span class=o>[</span>boolean<span class=o>]</span>
  --ignoreWarnings            Disregard non-critical issues            <span class=o>[</span>boolean<span class=o>]</span>
  --ignoreNiftiHeaders        Disregard NIfTI header content during validation
                                                                       <span class=o>[</span>boolean<span class=o>]</span>
  --ignoreSubjectConsistency  Skip checking that any given file <span class=k>for</span> one subject
                              is present <span class=k>for</span> all other subjects.       <span class=o>[</span>boolean<span class=o>]</span>
  --verbose                   Log more extensive information about issues
                                                                       <span class=o>[</span>boolean<span class=o>]</span>
  --json                      Output results as JSON                   <span class=o>[</span>boolean<span class=o>]</span>
  --ignoreSymlinks            Skip any symlinked directories when validating a
                              dataset                                  <span class=o>[</span>boolean<span class=o>]</span>
  --remoteFiles               Validate remote files.  <span class=o>[</span>boolean<span class=o>]</span> <span class=o>[</span>default: false<span class=o>]</span>
  --gitTreeMode               Improve performance using git metadata. Does not
                              capture changes not known to git.        <span class=o>[</span>boolean<span class=o>]</span>
  --gitRef                    Targets files at a given branch, tag, or commit
                              hash. Use with --gitTreeMode.  <span class=o>[</span>default: <span class=s2>&#34;HEAD&#34;</span><span class=o>]</span>
                                                                        <span class=o>[</span>string<span class=o>]</span>
  --config, -c                Optional configuration file. See
                              https://github.com/bids-standard/bids-validator
                              <span class=k>for</span> more info
                                        <span class=o>[</span>default: <span class=s2>&#34;.bids-validator-config.json&#34;</span><span class=o>]</span>
This tool checks <span class=k>if</span> a dataset in a given directory is compatible with the Brain
Imaging Data Structure specification. To learn more about Brain Imaging Data
Structure visit http://bids.neuroimaging.io
</code></pre></td></tr></table></div></div><h2 id=examples>Examples</h2><p>Initial <code>sample-dataset</code> directory structure:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sample-dataset
├── derivatives
│   └── pydeface-2.0.0
│       ├── sub-01
│       │   ├── sub-01_ses-01_T1w_defaced.nii.gz
│       │   └── sub-01_ses-01_T2w_defaced.nii.gz
│       └── sub-02
│           ├── sub-02_ses-01_T1w_defaced.nii.gz
│           ├── sub-02_ses-01_T2star_defaced.nii.gz
│           └── sub-02_ses-01_T2w_defaced.nii.gz
├── participants.json
├── participants.tsv
├── sub-01
│   └── ses-01
│       └── anat
│           ├── sub-01_ses-01_T1w.json
│           ├── sub-01_ses-01_T1w.nii.gz
│           ├── sub-01_ses-01_T2w.json
│           └── sub-01_ses-01_T2w.nii.gz
└── sub-02
    └── ses-01
        └── anat
            ├── sub-02_ses-01_T1w.json
            ├── sub-02_ses-01_T1w.nii.gz
            ├── sub-02_ses-01_T2star.json
            ├── sub-02_ses-01_T2star.nii.gz
            ├── sub-02_ses-01_T2w.json
            └── sub-02_ses-01_T2w.nii.gz
<span class=m>10</span> directories, <span class=m>17</span> files
</code></pre></td></tr></table></div></div><p>Now I'll run the <code>bids-validator</code> without any optional flags:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ bids-validator sample-dataset
</code></pre></td></tr></table></div></div><p>My terminal output:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>bids-validator@1.5.7
  1: <span class=o>[</span>ERR<span class=o>]</span> The compulsory file /dataset_description.json is missing. See Section <span class=m>03</span> <span class=o>(</span>Modality agnostic files<span class=o>)</span> of the BIDS specification. <span class=o>(</span>code: <span class=m>57</span> - DATASET_DESCRIPTION_JSON_MISSING<span class=o>)</span>
  Please visit https://neurostars.org/search?q<span class=o>=</span>DATASET_DESCRIPTION_JSON_MISSING <span class=k>for</span> existing conversations about this issue.
  1: <span class=o>[</span>WARN<span class=o>]</span> Not all subjects contain the same files. Each subject should contain the same number of files with the same naming unless some files are known to be missing. <span class=o>(</span>code: <span class=m>38</span> - INCONSISTENT_SUBJECTS<span class=o>)</span>
    ./sub-01/ses-01/anat/sub-01_ses-01_T2star.json
      Evidence: Subject: sub-01<span class=p>;</span> Missing file: sub-01_ses-01_T2star.json
    ./sub-01/ses-01/anat/sub-01_ses-01_T2star.nii.gz
      Evidence: Subject: sub-01<span class=p>;</span> Missing file: sub-01_ses-01_T2star.nii.gz
  Please visit https://neurostars.org/search?q<span class=o>=</span>INCONSISTENT_SUBJECTS <span class=k>for</span> existing conversations about this issue.
  2: <span class=o>[</span>WARN<span class=o>]</span> The recommended file /README is missing. See Section <span class=m>03</span> <span class=o>(</span>Modality agnostic files<span class=o>)</span> of the BIDS specification. <span class=o>(</span>code: <span class=m>101</span> - README_FILE_MISSING<span class=o>)</span>
  Please visit https://neurostars.org/search?q<span class=o>=</span>README_FILE_MISSING <span class=k>for</span> existing conversations about this issue.
        Summary:                 Available Tasks:        Available Modalities:
        <span class=m>12</span> Files, 38.63MB                                T1w
        <span class=m>2</span> - Subjects                                     T2w
        <span class=m>1</span> - Session                                      T2star
  If you have any questions, please post on https://neurostars.org/tags/bids.
</code></pre></td></tr></table></div></div><p>So, we have one tiny error and two warnings but as you can see, the error messages are quite detailed.</p><ul><li>Errors
Adding a <code>dataset_description.json</code> file should fix the errors. See <a href=https://bids-specification.readthedocs.io/en/stable/03-modality-agnostic-files.html#dataset-description>here</a> on how to create one</li><li>Warnings<ol><li>Most datasets don't have acquisitions with the same modalities so this warning could be ignored. Including the <code>--ignoreSubjectConsistency</code> should take of this.</li><li>A README file is recommended not <code>required</code> so we could ignore this too. Including the <code>--ignoreWarnings</code> flag should fix this.
Let's see if these changes fixes it:</li></ol></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ bids-validator sample-dataset --ignoreSubjectConsistency --ignoreWarnings
</code></pre></td></tr></table></div></div><p>woohoo!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>This dataset appears to be BIDS compatible.
        Summary:                 Available Tasks:        Available Modalities:
        <span class=m>13</span> Files, 38.63MB                                T1w
        <span class=m>2</span> - Subjects                                     T2w
        <span class=m>1</span> - Session                                      T2star
  If you have any questions, please post on https://neurostars.org/tags/bids.
</code></pre></td></tr></table></div></div><p>We now have valid BIDS dataset!</p><h2 id=sources>Sources</h2><p><a name=ref1></a><a href=https://bids-specification.readthedocs.io/en/stable/>BIDS Specification</a>
<a name=ref2></a><a href=https://bids-apps.neuroimaging.io/>BIDS Apps</a>
<a name=ref3></a><a href=https://bids-apps.neuroimaging.io/apps/>Available BIDS Apps</a>
<a name=ref4></a><a href=https://github.com/bids-standard/bids-validator>BIDS Validator GitHub Page</a>
<a name=ref5></a><a href=https://bids-specification.readthedocs.io/en/stable/03-modality-agnostic-files.html>Modality Agnostic Files</a></p><p class="text-center p-0">Recipe made by<a href=https://github.com/Arshitha> Arshitha Basavaraj</a></div><h2 class=text-center>These recipes may also be of interest</h2><ul><li class=content-accent><a href=/recipes/pydeface_recipe/><h3 class=active>PyDeface Recipe</h3></a><a class="post_tag button button_translucent" href=https://neuroimaging-cookbook.github.io/languages/bash/>bash</a><p>Defacing Multiple Brain Imaging Modalities using PyDeface For this recipe, we are using pydeface-2.0.0.
Ingredients: A python environment …
<a href=https://neuroimaging-cookbook.github.io/recipes/pydeface_recipe/ class=active>Read More</a></p></li><li class=content-accent><a href=/recipes/automatically-generated-recipe/><h3 class=active>Automatically Generated Recipe</h3></a><a class="post_tag button button_translucent" href=https://neuroimaging-cookbook.github.io/languages/python/>python</a>
<a class="post_tag button button_translucent" href=https://neuroimaging-cookbook.github.io/languages/r/>r</a>
<a class="post_tag button button_translucent" href=https://neuroimaging-cookbook.github.io/languages/bash/>bash</a><p>Explain briefly what the recipe does. Explain briefly how the recipe works. Provide a citation and link to documentation of any third party …
<a href=https://neuroimaging-cookbook.github.io/recipes/automatically-generated-recipe/ class=active>Read More</a></p></li></ul></div></div><footer class="pt-2 pb-2"><div class=wrap><p>&copy; <span class=year>2020</span> <a href=https://github.com/neuroimaging-cookbook/neuroimaging-cookbook.github.io target=_blank rel=noopener>Neuroimaging Cookbook Contributors</a></p></div></footer><svg width="0" height="0" class="hidden"><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next"><path d="M484.14 226.886 306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216.0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04.0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526.0 219.15.0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864.0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208.0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search"><path d="M508.874 478.708 360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416.0 202.666.0S0 90.917.0 202.667s90.917 202.667 202.667 202.667c48.206.0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086.0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229.0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger"><path d="M1 10C1 4.477 5.477.0 11 0h220c5.523.0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523.0 10 4.477 10 10s-4.477 10-10 10H11c-5.523.0-10-4.477-10-10zm9 69c-5.523.0-10 4.477-10 10s4.477 10 10 10h220c5.523.0 10-4.477 10-10s-4.477-10-10-10H10z"/></symbol></svg><script src=https://neuroimaging-cookbook.github.io/js/bundle.min.5af5a71cb7087a1e6a1579c029c74e083fa41198bfb107602ad29f77f53a4748cb3f09e998b78e1a26c952cede95c2f4d402b88c25591b16ff59f800220e4246.js></script><script src=https://neuroimaging-cookbook.github.io/js/search.min.43f6ab59a33fcb0840bf17e12ab2466ca092750e5035887234b8becaf41e8bc5a7ad9d2b284719cd4bafc61292bac18b27286e11cc6300a200dad982686b3f3b.js async defer></script></body></html>